<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title></title>

  <style>
    /* ðŸ”’ STYLES UNCHANGED */
    :root{
      --dark-blue:#0b2540;
      --muted:#9aa4b2;
      --accent:#6ee7b7;
      --accent-2:#60a5fa;
      --text:#e6eef8;
      --radius:12px;
      --max-width:1100px;
      --glass-border:rgba(255,255,255,0.04);
      --shadow:0 10px 30px rgba(2,6,23,0.6);
      --transition:220ms cubic-bezier(.2,.9,.3,1);
      --control-height:36px;
      --btn-size:36px;
      --box-height:36px;
    }

    html,body{
      height:100%;
      margin:0;
      font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;
      background:var(--dark-blue);
      color:var(--text);
    }

    .container{
      max-width:var(--max-width);
      margin:36px auto;
      padding:18px;
      display:grid;
      grid-template-columns:320px 1fr;
      gap:20px;
    }

    .panel,.card{
      background:var(--dark-blue);
      border-radius:var(--radius);
      padding:18px;
      border:1px solid var(--glass-border);
      box-shadow:var(--shadow);
    }

    .brand{display:flex;gap:12px;align-items:center}
    .logo{
      width:64px;height:64px;border-radius:6px;
      background:linear-gradient(135deg,var(--accent),var(--accent-2));
      display:flex;align-items:center;justify-content:center;
      font-weight:700;color:#04263b;font-size:20px;
    }

    .left-rows{margin-top:14px;display:flex;flex-direction:column;gap:10px}
    .row{display:flex;gap:10px;align-items:center}

    .text-box{
      flex:1;padding:8px 10px;border-radius:10px;
      background:rgba(255,255,255,0.02);
      border:1px solid rgba(255,255,255,0.04);
      font-weight:600;font-size:.92rem;
      overflow:hidden;text-overflow:ellipsis;white-space:nowrap;
    }

    .action-btn{
      width:var(--btn-size);height:var(--btn-size);
      border-radius:8px;border:none;cursor:pointer;
      display:flex;align-items:center;justify-content:center;
      background:linear-gradient(180deg,var(--accent),var(--accent-2));
    }

    .controls{display:flex;gap:10px}
    .search{
      flex:1;background:transparent;
      border:1px solid rgba(255,255,255,0.04);
      border-radius:10px;padding:6px 10px;color:var(--text);
    }

    .accordion{margin-top:18px;display:grid;gap:12px}
    .section{border-radius:12px;border:1px solid rgba(255,255,255,.03)}
    .section-header{padding:14px 16px}
    .section-body{padding:12px 18px 18px;line-height:1.6}

    .card-footer{
      margin-top:18px;display:flex;justify-content:space-between;
      gap:12px;flex-wrap:wrap;color:var(--muted)
    }
  </style>
</head>

<body>
  <div class="container">
    <aside class="panel">
      <div class="brand">
        <div id="logoText" class="logo"></div>
        <div>
          <h1 id="panel-title"></h1>
          <p id="panel-subtitle"></p>
        </div>
      </div>

      <div id="panel-meta" class="meta"></div>

      <div class="left-rows">
        <div class="row">
          <div id="emailText" class="text-box"></div>
          <button id="copyBtn" class="action-btn"></button>
        </div>

        <div class="row">
          <div id="shopText" class="text-box"></div>
          <a id="shopBtn" class="action-btn" target="_blank"></a>
        </div>

        <div id="panel-tip" class="small-note"></div>
      </div>
    </aside>

    <main class="card">
      <div class="card-header">
        <div>
          <h2 id="main-title"></h2>
          <p id="subtitle"></p>
        </div>

        <div class="controls">
          <input id="searchInput" class="search" />
          <div class="last-updated-box">
            <div id="lastUpdatedLabel" class="label"></div>
            <div id="lastUpdated" class="date"></div>
          </div>
        </div>
      </div>

      <div id="accordion" class="accordion"></div>

      <div class="card-footer">
        <div id="agreementNote"></div>
        <div id="sourceAttribution" class="pill"></div>
      </div>
    </main>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>

  <script>
    const SOURCE = 'terms.json';

    const $ = id => document.getElementById(id);

    fetch(SOURCE,{cache:'no-store'})
      .then(r=>r.json())
      .then(d=>{
        document.title = d.pageTitle;

        $('logoText').textContent = d.brand.logoText;
        $('panel-title').textContent = d.brand.brandTitle;
        $('panel-subtitle').textContent = d.brand.brandSubtitle;
        $('panel-meta').textContent = d.brand.meta;
        $('panel-tip').textContent = d.brand.tip;

        $('main-title').textContent = d.title;
        $('subtitle').textContent = d.subtitle;

        $('emailText').textContent = d.contact.email;
        $('shopText').textContent = d.contact.shop;
        $('shopBtn').href = d.contact.shop;

        $('searchInput').placeholder = d.ui.searchPlaceholder;
        $('copyBtn').title = d.ui.copyEmailTooltip;
        $('shopBtn').title = d.ui.openShopTooltip;

        $('lastUpdatedLabel').textContent = d.ui.lastUpdatedLabel;
        $('lastUpdated').textContent =
          new Date(d.lastUpdated).toLocaleDateString(undefined,{
            weekday:'long',year:'numeric',month:'long',day:'numeric'
          });

        $('agreementNote').textContent = d.ui.agreementNote;
        $('sourceAttribution').textContent = d.ui.sourceAttribution;

        d.sections.forEach(s=>{
          const sec=document.createElement('section');
          sec.className='section';
          sec.innerHTML=
            `<div class="section-header"><strong>${s.title}</strong></div>
             <div class="section-body">${
               typeof s.body==='string'
                 ? `<p>${s.body}</p>`
                 : `<p>${s.body.intro}</p><ul>${s.body.items.map(i=>`<li>${i}</li>`).join('')}</ul>`
             }</div>`;
          $('accordion').append(sec);
        });
      });
  </script>
</body>
</html>
