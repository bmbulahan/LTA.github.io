<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>License Terms Agreement</title>
<style>
  :root{
    --bg:#0b0f14;
    --panel:#0f1720;
    --muted:#9aa6b2;
    --accent:#7c5cff;
    --glass: rgba(255,255,255,0.03);
    --card-shadow: 0 6px 18px rgba(2,6,23,0.7);
    --btn-size:36px;
    --radius:12px;
    --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Segoe UI Mono", monospace;
  }
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#071018 0%, #08121a 100%);font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; color:#e6eef6;}
  .wrap{max-width:920px;margin:48px auto;padding:28px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:16px;box-shadow:var(--card-shadow);border:1px solid rgba(255,255,255,0.03);}
  header{display:flex;flex-direction:column;gap:8px;margin-bottom:18px}
  .last-update{font-size:13px;color:var(--muted);letter-spacing:0.02em}
  .update-date{font-weight:600;color:#dbe9ff;font-size:14px}
  .top-row{display:flex;align-items:center;gap:12px;margin-top:6px;flex-wrap:wrap}
  .contact{display:flex;align-items:center;gap:10px}
  .btn-icon{
    width:var(--btn-size);height:var(--btn-size);display:inline-grid;place-items:center;border-radius:8px;background:var(--glass);border:1px solid rgba(255,255,255,0.03);cursor:pointer;
    transition:transform .12s ease, background .12s ease;
  }
  .btn-icon:hover{transform:translateY(-2px);background:rgba(255,255,255,0.04)}
  .selectable{user-select:text; -webkit-user-select:text; -moz-user-select:text;}
  .email-row, .shop-row{display:flex;align-items:center;gap:10px;padding:10px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border:1px solid rgba(255,255,255,0.02)}
  .email-text, .shop-text{font-family:var(--mono);font-size:14px;color:#cfe6ff}
  .spacer{flex:1}
  main{margin-top:18px}
  h1{margin:0;font-size:20px;color:#fff}
  .subtitle{color:var(--muted);margin-top:6px;font-size:13px}
  .card{margin-top:18px;padding:18px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border:1px solid rgba(255,255,255,0.02)}
  ol{padding-left:18px;margin:12px 0 0 0;color:var(--muted)}
  li{margin:12px 0}
  .section-title{font-weight:700;color:#eaf3ff;margin-bottom:8px}
  .license-text{color:#dbe9ff;line-height:1.6}
  footer{margin-top:18px;color:var(--muted);font-size:13px}
  /* small responsive */
  @media (max-width:640px){
    .wrap{margin:18px;padding:18px}
    .top-row{flex-direction:column;align-items:flex-start}
  }
</style>
</head>
<body>
  <div class="wrap" role="main">
    <header>
      <div class="last-update">Last update</div>
      <div class="update-date" id="lastUpdate">--</div>

      <div class="top-row">
        <div class="contact email-row" title="Email (click copy)">
          <button id="copyEmailBtn" class="btn-icon" aria-label="Copy email">
            <!-- copy icon -->
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden>
              <path d="M16 21H8a2 2 0 0 1-2-2V7" stroke="#cfe6ff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
              <rect x="9" y="3" width="11" height="14" rx="2" stroke="#cfe6ff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <div class="email-text selectable" id="emailText" aria-live="polite">loading...</div>
        </div>

        <div class="spacer"></div>

        <div class="contact shop-row" title="Shop link">
          <div class="shop-text selectable" id="shopText">loading...</div>
          <button id="openShopBtn" class="btn-icon" aria-label="Open shop in new tab">
            <!-- external link icon -->
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" aria-hidden>
              <path d="M14 3h7v7" stroke="#cfe6ff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M10 14L21 3" stroke="#cfe6ff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M21 21H3V3" stroke="#cfe6ff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>
    </header>

    <main>
      <h1>License Terms Agreement</h1>
      <div class="subtitle">Please read these terms carefully before using any items from the shop.</div>

      <section class="card" id="licenseCard" aria-labelledby="licenseHeading">
        <div class="section-title" id="licenseHeading">License Terms Agreement</div>
        <div class="license-text" id="licenseContent">
          <!-- license content will be injected here from JSON -->
          Loading license...
        </div>
      </section>

      <footer>
        <div>By purchasing, downloading, or using any item or file from this shop, you acknowledge that you have read, understood, and agreed to these License Terms.</div>
      </footer>
    </main>
  </div>

<script>
(async function(){
  const defaults = {
    lastUpdate: "12-Jan-2026",
    email: "Bulahan.belmar@gmail.om",
    shop: "https://ko-fi.com/bmbulahan/shop",
    licenseHtml: `
      <ol>
        <li>
          <strong>Personal Use Only</strong>
          <div>All items and files purchased from this shop are licensed solely for personal use. Commercial use of any kind—including but not limited to resale, reproduction, distribution, or incorporation into products for sale—is strictly prohibited unless prior written permission is obtained.</div>
        </li>
        <li>
          <strong>Restrictions on 3D Models and Files</strong>
          <div>Any 3D model, or portion thereof, whether in digital or physical format, may not be:
            <ul>
              <li>Shared or transmitted to others</li>
              <li>Redistributed or uploaded to any platform</li>
              <li>Remixed, altered, or duplicated for distribution</li>
              <li>Sold, licensed, or otherwise monetized</li>
            </ul>
          </div>
        </li>
        <li>
          <strong>Ownership</strong>
          <div>All items and files remain the intellectual property of ko-fi.com/bmbulahan. Purchase grants the buyer a non-exclusive, non-transferable license for personal use only.</div>
        </li>
        <li>
          <strong>Enforcement</strong>
          <div>Violation of these terms may result in revocation of license, removal of access, and potential legal action.</div>
        </li>
        <li>
          <strong>Commercial Licensing Contact</strong>
          <div>If you wish to use any item or file for commercial purposes, you must obtain a separate commercial license. Please contact at <span id="contactEmailInline">Bulahan.belmar@gmail.om</span> to discuss licensing terms, fees, and permissions.</div>
        </li>
        <li>
          <strong>Agreement</strong>
          <div>By purchasing, downloading, or using any item or file from this shop, you acknowledge that you have read, understood, and agreed to these License Terms.</div>
        </li>
      </ol>
    `
  };

  // Attempt to fetch data.json from same directory
  let data = defaults;
  try {
    const res = await fetch('data.json', {cache: "no-store"});
    if (res.ok) {
      const json = await res.json();
      // Basic validation and fallback
      data = {
        lastUpdate: json.lastUpdate || defaults.lastUpdate,
        email: json.email || defaults.email,
        shop: json.shop || defaults.shop,
        licenseHtml: json.licenseHtml || defaults.licenseHtml
      };
    }
  } catch (e) {
    // fetch failed; keep defaults
    console.warn('Could not load data.json, using defaults.', e);
  }

  // Populate UI
  const lastUpdateEl = document.getElementById('lastUpdate');
  const emailTextEl = document.getElementById('emailText');
  const shopTextEl = document.getElementById('shopText');
  const licenseContentEl = document.getElementById('licenseContent');
  const contactEmailInline = document.getElementById('contactEmailInline');

  lastUpdateEl.textContent = formatDateString(data.lastUpdate);
  emailTextEl.textContent = data.email;
  shopTextEl.textContent = data.shop;
  licenseContentEl.innerHTML = data.licenseHtml;
  if (contactEmailInline) contactEmailInline.textContent = data.email;

  // Copy email button
  const copyBtn = document.getElementById('copyEmailBtn');
  copyBtn.addEventListener('click', async () => {
    try {
      await navigator.clipboard.writeText(data.email);
      copyBtn.setAttribute('aria-label', 'Email copied');
      // small visual feedback
      copyBtn.style.transform = 'translateY(-2px) scale(0.98)';
      setTimeout(()=>copyBtn.style.transform='', 220);
    } catch (err) {
      // fallback: select the text for manual copy
      const range = document.createRange();
      range.selectNodeContents(emailTextEl);
      const sel = window.getSelection();
      sel.removeAllRanges();
      sel.addRange(range);
    }
  });

  // Open shop button
  const openShopBtn = document.getElementById('openShopBtn');
  openShopBtn.addEventListener('click', () => {
    window.open(data.shop, '_blank', 'noopener');
  });

  // Helper: ensure date is dd-MMM-yyyy (e.g., 12-Jan-2026)
  function formatDateString(input){
    // If already in dd-MMM-yyyy, return as-is
    if (/^\d{1,2}-[A-Za-z]{3}-\d{4}$/.test(input)) return input;
    // Try to parse ISO or other formats
    const d = new Date(input);
    if (isNaN(d)) return input;
    const day = String(d.getDate()).padStart(2,'0');
    const monthNames = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
    const mon = monthNames[d.getMonth()];
    const yr = d.getFullYear();
    return `${day}-${mon}-${yr}`;
  }
})();
</script>
</body>
</html>
