<!-- index.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>License Terms Agreement</title>
  <style>
    :root{
      --bg:#f6f8fb;
      --card:#ffffff;
      --accent:#0b74de;
      --muted:#6b7280;
      --border:#e6e9ef;
      --radius:12px;
      --max-width:900px;
      --pad:24px;
      --shadow: 0 6px 18px rgba(11,116,222,0.08);
    }

    html,body{
      height:100%;
      margin:0;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background:linear-gradient(180deg,var(--bg),#eef3fb 60%);
      color:#111827;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .wrap{
      max-width:var(--max-width);
      margin:48px auto;
      padding:16px;
    }

    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      padding:var(--pad);
      box-shadow:var(--shadow);
    }

    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      margin-bottom:12px;
    }

    h1{
      font-size:1.25rem;
      margin:0;
      letter-spacing:-0.2px;
    }

    .meta{
      color:var(--muted);
      font-size:0.95rem;
    }

    .content{
      margin-top:12px;
      line-height:1.6;
      color:#111827;
    }

    .section{
      margin:18px 0;
    }

    .section h3{
      margin:0 0 8px 0;
      font-size:1rem;
    }

    .section p{
      margin:0 0 8px 0;
      color:#374151;
    }

    ul.restrictions{
      margin:8px 0 0 1.25rem;
      color:#374151;
    }

    .email-button{
      display:inline-block;
      padding:10px 14px;
      background:linear-gradient(180deg,var(--accent),#0a63b8);
      color:#fff;
      text-decoration:none;
      border-radius:8px;
      font-weight:600;
      font-size:0.95rem;
      border:1px solid rgba(255,255,255,0.12);
      box-shadow: 0 4px 10px rgba(11,116,222,0.12);
      transition:transform .08s ease, box-shadow .12s ease;
      user-select:text;
      -webkit-user-select:text;
      -moz-user-select:text;
      -ms-user-select:text;
      cursor:pointer;
    }

    .email-button:active{ transform:translateY(1px); }
    .email-button:focus{
      outline:3px solid rgba(11,116,222,0.18);
      outline-offset:3px;
    }

    .note{
      color:var(--muted);
      font-size:0.92rem;
    }

    footer{
      margin-top:18px;
      color:var(--muted);
      font-size:0.9rem;
    }

    @media (max-width:520px){
      .card{ padding:16px; }
      h1{ font-size:1.05rem; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <article class="card" aria-labelledby="license-title">
      <header>
        <div>
          <h1 id="license-title">License Terms Agreement</h1>
          <div class="meta">Please read these terms carefully before using any purchased items.</div>
        </div>
        <div class="contact-row" aria-hidden="false">
          <a id="emailLink" class="email-button" href="#" aria-label="Contact email">
            loading...
          </a>
        </div>
      </header>

      <section id="terms" class="content" role="region" aria-labelledby="terms-heading">
        <h2 id="terms-heading" style="font-size:1rem;margin:0 0 12px 0;">Terms</h2>
        <div id="termsContainer" aria-live="polite">
          <!-- content injected here -->
        </div>

        <footer>
          <div id="lastUpdated" class="note">Last updated: —</div>
        </footer>
      </section>
    </article>
  </div>

  <script>
    // Path to the editable file. Edit this JSON file to change the text.
    const SOURCE = 'terms.json';

    function createParagraph(text){
      const p = document.createElement('p');
      p.textContent = text;
      return p;
    }

    function createList(items){
      const ul = document.createElement('ul');
      ul.className = 'restrictions';
      items.forEach(it => {
        const li = document.createElement('li');
        li.textContent = it;
        ul.appendChild(li);
      });
      return ul;
    }

    function renderTerms(data){
      const container = document.getElementById('termsContainer');
      container.innerHTML = '';

      if (data.sections && Array.isArray(data.sections)){
        data.sections.forEach((sec, idx) => {
          const wrap = document.createElement('div');
          wrap.className = 'section';
          const h = document.createElement('h3');
          h.textContent = (idx + 1) + '. ' + sec.title;
          wrap.appendChild(h);

          // body can be array of paragraphs or an object with list
          if (Array.isArray(sec.body)){
            sec.body.forEach(b => {
              wrap.appendChild(createParagraph(b));
            });
          } else if (sec.body && sec.body.type === 'list' && Array.isArray(sec.body.items)){
            // optional intro text
            if (sec.body.intro) wrap.appendChild(createParagraph(sec.body.intro));
            wrap.appendChild(createList(sec.body.items));
          } else if (typeof sec.body === 'string'){
            wrap.appendChild(createParagraph(sec.body));
          }

          container.appendChild(wrap);
        });
      } else {
        container.appendChild(createParagraph('No terms available.'));
      }

      // email
      const email = data.contact && data.contact.email ? data.contact.email : '';
      const emailLink = document.getElementById('emailLink');
      if (email){
        emailLink.href = 'mailto:' + email;
        emailLink.textContent = email;
        emailLink.setAttribute('aria-label', 'Email ' + email);
      } else {
        emailLink.href = '#';
        emailLink.textContent = 'contact';
      }

      // last updated
      const last = data.lastUpdated || '—';
      document.getElementById('lastUpdated').textContent = 'Last updated: ' + last;
    }

    // Fetch the JSON file and render. If fetch fails, show fallback text.
    fetch(SOURCE, {cache: "no-store"})
      .then(resp => {
        if (!resp.ok) throw new Error('Failed to load terms.json');
        return resp.json();
      })
      .then(json => renderTerms(json))
      .catch(err => {
        const container = document.getElementById('termsContainer');
        container.innerHTML = '';
        container.appendChild(createParagraph('Could not load external terms. You can still edit terms.json in the same folder and reload the page.'));
        console.error(err);
      });
  </script>
</body>
</html>
